campaignTrail_temp.election_json = [
    {
        "model": "campaign_trail.election",
        "pk": 20,
        "fields": {
            "year": 2016,
            "summary": "<b>Michael Bloomberg</b> should never have been here. After all, the former NYC mayor polled poorly among many voters and lacked the charisma needed to even win outside the Big Apple. The bigger picture's even worse: a New York billionaire replacing another New York billionaire after a time of turmoil? Stupid. It was impossible for him... until he realized his net worth: over $100 billion dollars. With that number, who needs the support of the people when you can essentially <b>buy</b> your way to the presidency?<br><br>As president-elect, Bloomberg knows exactly what agenda will be—it won't be to appease the voting man, but rather to appease people like him: the bankers, the corporations, the capitalists in expensive suits. Let the Progressives scream, the Republicans howl, and let the average man break his Bloomberg 2020 sign in rage. It won't matter in the end. It never will.</p>",
            "image_url": "https://files.catbox.moe/87dkuo.jpeg",
            "winning_electoral_vote_number": 270,
            "advisor_url": "https://files.catbox.moe/hua22a.jpg",
            "recommended_reading": "<h4 style=\"margin-top: 0.5em;\">Articles</h4>FiveThirtyEight - <a href=\"http://projects.fivethirtyeight.com/2016-swing-the-election/\" target=\"_blank\"> What Would It Take To Turn Blue States Red?</a></br><a href=\"http://thehill.com/blogs/ballot-box/presidential-races/274317-anti-trump-forces-point-to-losing-match-ups-with-clinton\">Anti-Trump forces seize on grim polls for Clinton match-up</a></br><a href=\"http://www.slate.com/blogs/the_slatest/2016/02/24/donald_trump_could_beat_hillary_clinton_in_the_general.html\">Think Hillary Clinton Will Crush Donald Trump in the General Election? Don’t Be So Sure.</a></br><a href=\"http://www.slate.com/blogs/the_slatest/2016/03/01/hillary_clinton_plots_her_general_election_trump_strategy.html\">How Team Clinton Is Planning to Defeat Trump</a></br><a href=\"http://www.vox.com/2016/2/10/10961324/donald-trump-win-november\">Here's Donald Trump's Best Strategy for Winning the White House</a><h4>Books</h4>\nHillary Clinton - <a href=\"http://www.amazon.com/exec/obidos/ASIN/1476751471/amhius20-20\" target=\"_blank\">Hard Choices</a></br>\nHillary Clinton - <a href=\"http://www.amazon.com/exec/obidos/ASIN/0743222253/amhius20-20\" target=\"_blank\">Living History</a></br>\nDonald Trump - <a href=\"http://www.amazon.com/exec/obidos/ASIN/1501137964/amhius20-20\" target=\"_blank\">Crippled America: How to Make America Great Again</a></br>\nDonald Trump - <a href=\"http://www.amazon.com/exec/obidos/ASIN/0399594493/amhius20-20\" target=\"_blank\">The Art of the Deal</a></br>\nGary Johnson - <a href=\"http://www.amazon.com/exec/obidos/ASIN/B008PXW0C0/amhius20-20\" target=\"_blank\">Seven Principles of Good Government</a>",
            "has_visits": 1,
            "no_electoral_majority_image": "https://www.jetsimon.com/public/static/images/2012-no-majority.jpg",
            "creator": "Dan Bryan",
            "display_year": "2024 - Agenda 2025"
        }
    }
]

campaignTrail_temp.candidate_json = [
    {
        "model": "campaign_trail.candidate",
        "pk": 200,
        "fields": {
            "first_name": "Michael",
            "last_name": "Bloomberg",
            "election": 20,
            "party": "Democratic (Corporatocratic Wing)",
            "state": "To Pull The Strings Tighter",
            "priority": 1,
            "description": "<p>The empire he built is endless. The skyscraper he's on top of stretches on for miles. The money he has in his pants can fill everyone else's pockets. But would he give it away to help America? No. Not in a million years; he worked too hard to give handouts to those poorer than him. He needs it all to be in power since he knows <b>money</b> is more valuable than any job you hold. If not for Citizens United, he wouldn't even made it past Iowa, let alone be considered seriously by any democrat voter. Due to the anger of the commoners directed towards Donnie, he faced little repercussions and won a shock victory in 2020.<br><br>The utmost priority Bloomberg has is consolidating power towards himself and his centrist cronies in business suits. To ensure his dream of an American corporatocracy is realized. To ensure the strings that pull America remain unbroken. To ensure the status quo lives on and on and on...</p>",
            "color_hex": "#1072a1",
            "secondary_color_hex": "#1072a1",
            "is_active": 1,
            "image_url": "https://files.catbox.moe/uy5q8c.jpeg",
            "electoral_victory_message": "<h3>Congratulations! You have won the 2016 election.</h3><p>In spite of a hard-fought challenge from Hillary Clinton, you have shocked the world with your election victory.</p><p>On the political front, you have the bully pulpit in your favor, but support in Congress in uncertain. Will you govern as a more traditional conservative, or will you make a break from orthodoxy?</p>",
            "electoral_loss_message": "<h3>Sorry! You have lost the 2016 election.</h3><p>Many of your supporters are despondent that you have faltered to the likes of Hillary Clinton. Republicans in general believe this was a very winnable election, and are enraged that you came in to blow it. Luckily, there are any number of ways for you to take advantage of your newfound exposure. One rumor even has you founding a television station to profit from the aggrieved sensibilities of your followers. The future is in your hands.</p>",
            "no_electoral_majority_message": "<h3>Wow! You have pulled out 2016 election.</h3><p>No candidate secured a majority in the Electoral College. However, the Republicans won a majority in Congress and will elevate you to the Presidency. Time will tell how things go in that regard. Any mutual affection between you and Congress is predicted to be short-lived, but you've pulled off a number of surprises to get this far.</p>",
            "description_as_running_mate": "'",
            "candidate_score": 1,
            "running_mate": false
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 201,
        "fields": {
            "first_name": "The",
            "last_name": "Grand Old Party",
            "election": 20,
            "party": "Republican",
            "state": "To Destroy America",
            "priority": 2,
            "description": "<p>As expected, Hillary Clinton has carried her party's nomination, and now faces an unexpected opponent in Donald Trump. She was traditionally known as a mainstream Democrat, but tacked significantly to the left during the primary campaign. Clinton enters the general election in a strong position, but she'll be under relentless attack on a number of fronts. Can she make the case that she truly in touch with the American people -- or that Trump would be an even worse option?</p>",
            "color_hex": "#c23636",
            "secondary_color_hex": "#c23636",
            "is_active": 0,
            "image_url": "'",
            "electoral_victory_message": "<h3>Congratulations! You have won the 2016 election.</h3><p>In spite of a hard-fought challenge from Donald Trump, you have become the first woman elected to serve as President.</p><p>On the political front, it is unclear how much of your agenda you will be able to push forward with the current Congress. Hopefully your victory has helped Democrats further down the ballot. Start packing and prepare to move back into the White House!</p>",
            "electoral_loss_message": "<h3>Sorry! You have lost the 2016 election.</h3><p>Many of your supporters are despondent that you have faltered to the likes of Donald Trump. Many in the left wing of the party are furious that you pushed their candidate aside, only to lose. Time will tell how Trump operates as President. As for you, a long and sometimes ambiguous political career seems to be coming to its end.</p>",
            "no_electoral_majority_message": "<h3>Sorry! You have lost the 2016 election.</h3><p>No candidate secured a majority in the Electoral College. However, the Republicans won a majority in Congress and will elevate Trump to the Presidency. Time will tell how things go in that regard. As for you, a long and sometimes ambiguous political career seems to be coming to its end.</p>",
            "description_as_running_mate": "'",
            "candidate_score": 1,
            "running_mate": false
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 202,
        "fields": {
            "first_name": "Bernie",
            "last_name": "Sanders",
            "election": 20,
            "party": "Green/Independent",
            "state": "To Bring Justice For All",
            "priority": 3,
            "description": "'",
            "color_hex": "#db8223",
            "secondary_color_hex": "#db8223",
            "is_active": 0,
            "image_url": "'",
            "electoral_victory_message": "'",
            "electoral_loss_message": "'",
            "no_electoral_majority_message": "'",
            "description_as_running_mate": "'",
            "candidate_score": 1,
            "running_mate": false
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 203,
        "fields": {
            "first_name": "Chase",
            "last_name": "Oliver/Others",
            "election": 20,
            "party": "Libertarian/Various",
            "state": "To Bring An Alternative",
            "priority": 4,
            "description": "'",
            "color_hex": "#2ca853",
            "secondary_color_hex": "#2ca853",
            "is_active": 0,
            "image_url": "'",
            "electoral_victory_message": "'",
            "electoral_loss_message": "'",
            "no_electoral_majority_message": "'",
            "description_as_running_mate": "'",
            "candidate_score": 1,
            "running_mate": false
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 204,
        "fields": {
            "first_name": "Deval",
            "last_name": "Patrick",
            "election": 20,
            "party": "Democratic (Establishment Wing)",
            "state": "To Turn A Blind Eye On America",
            "priority": 5,
            "description": "'",
            "color_hex": "#FF0000",
            "secondary_color_hex": "#FFA0A0",
            "is_active": 0,
            "image_url": "https://files.catbox.moe/7emqga.jpg",
            "electoral_victory_message": "'",
            "electoral_loss_message": "'",
            "no_electoral_majority_message": "'",
            "description_as_running_mate": "<p>Thankfully, the establishment is more lenient towards an entrepreneur such as yourself, considering their #1 enemy is Donnie Trump. Throwing a bone to them seemed to have kept at least most of the base loyal to you and not some hot-headed revolutionary like Bernie. As you won gracefully by the skin of your teeth, Deval Patrick sighed, knowing what business he's getting himself into.<br><br>Patrick remains inoffensive to most, and that's his best upside, but it's also his worst. He may not anger those who actually matter—the establishment politicians saying the same boring points on repeat—but for an already pissed off electorate, the time to enact the agenda dwindles with each passing moment. Opposition can run up rapidly by the poor. Deval's dead weight, but maybe replacing him with someone, anyone, could be worse...</p>",
            "candidate_score": 0,
            "running_mate": true
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 209,
        "fields": {
            "first_name": "Mr. GOP",
            "last_name": "Running Mate",
            "election": 20,
            "party": "Republican",
            "state": "To Be Useless",
            "priority": 9,
            "description": "'",
            "color_hex": "#0000FF",
            "secondary_color_hex": "#90C0FF",
            "is_active": 0,
            "image_url": "'",
            "electoral_victory_message": "'",
            "electoral_loss_message": "'",
            "no_electoral_majority_message": "'",
            "description_as_running_mate": "<p>Tim Kaine has served as a Governor and Senator from Virginia, and shares similar political views to Hillary Clinton. He is fluent in both Spanish and English.</p><p>A lot of people see Kaine as a safe, experienced pick. He has little to offer to the wing of the party that supported Bernie Sanders during the nomination fight.</p>",
            "candidate_score": 0,
            "running_mate": true
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 214,
        "fields": {
            "first_name": "Mr. Progressive",
            "last_name": "Running Mate",
            "election": 20,
            "party": "Green/Independent",
            "state": "To Fight For The Commoner",
            "priority": 14,
            "description": "'",
            "color_hex": "#FFFF00",
            "secondary_color_hex": "#FFFFC0",
            "is_active": 0,
            "image_url": "'",
            "electoral_victory_message": "'",
            "electoral_loss_message": "'",
            "no_electoral_majority_message": "'",
            "description_as_running_mate": "'",
            "candidate_score": 0,
            "running_mate": true
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 215,
        "fields": {
            "first_name": "Mr. Third-Party",
            "last_name": "Running Mate",
            "election": 20,
            "party": "Various",
            "state": "Uh...",
            "priority": 15,
            "description": "'",
            "color_hex": "#00C100",
            "secondary_color_hex": "#A1FFA1",
            "is_active": 0,
            "image_url": "'",
            "electoral_victory_message": "'",
            "electoral_loss_message": "'",
            "no_electoral_majority_message": "'",
            "description_as_running_mate": "'",
            "candidate_score": 0,
            "running_mate": true
        }
    }
]

campaignTrail_temp.running_mate_json = [
    {
        "model": "campaign_trail.running_mate",
        "pk": 161,
        "fields": {
            "candidate": 203,
            "running_mate": 215
        }
    },
    {
        "model": "campaign_trail.running_mate",
        "pk": 160,
        "fields": {
            "candidate": 202,
            "running_mate": 214
        }
    },
    {
        "model": "campaign_trail.running_mate",
        "pk": 155,
        "fields": {
            "candidate": 201,
            "running_mate": 209
        }
    },
    {
        "model": "campaign_trail.running_mate",
        "pk": 150,
        "fields": {
            "candidate": 200,
            "running_mate": 204
        }
    }
]

campaignTrail_temp.credits = "C0SM0"

campaignTrail_temp.global_parameter_json = [
    {
        "model": "campaign_trail.global_parameter",
        "pk": 1,
        "fields": {
            "vote_variable": 1.125,
            "max_swing": 0.12,
            "start_point": 0.94,
            "candidate_issue_weight": 10,
            "running_mate_issue_weight": 3,
            "issue_stance_1_max": -0.71,
            "issue_stance_2_max": -0.3,
            "issue_stance_3_max": -0.125,
            "issue_stance_4_max": 0.125,
            "issue_stance_5_max": 0.3,
            "issue_stance_6_max": 0.71,
            "global_variance": 0.01,
            "state_variance": 0.005,
            "question_count": 33,
            "default_map_color_hex": "#C9C9C9",
            "no_state_map_color_hex": "#999999"
        }
    }
]

campaignTrail_temp.opponents_default_json = [
    {
        "election": 20,
        "candidates": [
            200,
            201,
            202,
            203
        ]
    }
]

campaignTrail_temp.opponents_weighted_json = [
    {
        "election": 20,
        "candidates": [
            200,
            201,
            202,
            203
        ]
    }
]

campaignTrail_temp.temp_election_list = [
    {
        "id": 20,
        "year": 2016,
        "is_premium": 0,
        "display_year": "2024 - Agenda 2025"
    }
]

jet_data = {
    "headerColor": "#FFFFFF",
    "windowColor": "#7f8dc9",
    "containerColor": "#FFFFFF",
    "innerWindowColor": "#6b78b0",
    "bannerImageUrl": "https://files.catbox.moe/aduguq.png",
    "backgroundImageUrl": "https://i.imgur.com/eZJL6TZ.png",
    "endingTextColor": "#000000",
    "customQuote": "",
    "gameTitle": "Agenda 2025."
}

//#startcode


corrr = '\n              <h2>Agenda 2025.</h2>\n            ';


nct_stuff.themes[nct_stuff.selectedTheme].coloring_title = "#FFFFFF";

nct_stuff.themes[nct_stuff.selectedTheme].coloring_window = "#a1b2fa";

document.getElementsByClassName("game_header")[0].style.backgroundColor = nct_stuff.themes[nct_stuff.selectedTheme].coloring_title;

$("#game_window")[0].style.backgroundColor = nct_stuff.themes[nct_stuff.selectedTheme].coloring_window;

$(".container")[0].style.backgroundColor = "#FFFFFF";

$("#game_window")[0].style.borderColor = "#3b4366"

$(".container")[0].style.border = ".2em solid #3b4366"

document.getElementById("header").src = "https://files.catbox.moe/aduguq.png";

document.body.background = "https://i.imgur.com/eZJL6TZ.png";

document.head.innerHTML += "<style>#results_container {color:#000000;} .inner_window_w_desc {background-color:#a1b2fa!important;}</style>";

e.HomeStateText = "Agenda:";

const customStyling = document.createElement("style");
customStyling.innerHTML = `#map_container {
    background-image: url("https://i.imgur.com/eZJL6TZ.png");
    background-size: cover;
}`;
customStyling.id=`map_image`
document.head.appendChild(customStyling);

quotes = [""];
customquote = quotes[Math.floor((Math.random() * quotes.length))];

corrr = `
  <h2 style="color: #000; font-style: normal;">
    Agenda 2025.
  </h2>
`;

campaignTrail_temp.modBoxTheme = { "header_color": "#a1b2fa", "header_image_url": "https://files.catbox.moe/jwycb7.png", "header_text_color": "#ffffff", "description_text_color": "#000000", "description_background_color": "#a1b2fa", "main_color": "#ffffff", "secondary_color": "#a1b2fa", "ui_text_color": "#FFFFFF" }

RecReading=true

  campaignTrail_temp.credits = "<button onclick='credits()'>C0SM0</button>";
  
window.credits = function() {
  const creditsList = ["C0SM0, for the writing & coding.", "", "Banner & original mod concept by some mf on the TCT Discord (no seriously I'm too lazy to check).", "Soundtrack code provided by Houseyhouse.", "Some codes provided by DecStarG & Mangolith."];

  const text = "This Code 1 was made by...\n\n" + creditsList.join('\n');

  alert(text);
}

$("#inner_window_1 h3").css("text-align", "center").text("Do you have what it takes to complete a Corporate Agenda?");

document.getElementById("inner_window_1").children[1].innerHTML =  `<li>After four long years of Donald Trump destroying our country, <b>You are up to the task of cleaning the ashes.</b></li><li>As historically unpopular candidate Michael Bloomberg, you shall govern the free world and lead it <b>away from its years of lead.</b></li><li>From all walks of life, you will meet resistance against your corporate-focused goals and centrist beliefs.</li><li>Your decisions will affect your popularity for better or worse, with the middle man inevitably getting screwed over.</li><li>The path to re-election already looks murky, but they said that in 2020. Will you be able to prove them wrong for a second time?</li><li>No matter what, one thing will be clear: America will forever be governed by a few rich men.</li><li>Godspeed in <b><span style="color: #a1b2fa;">Agenda 2025.</span></b></li>`;

document.getElementById('game_start').innerHTML = '<b>Click Here To Enact Your Agenda.</b>';

// Custom favicon
$("#dynamic-favicon").attr("href", "https://files.catbox.moe/ytzaia.png");

HistHexcolour=["#c23636","#1072a1","#db8223","#2ca853"];
    HistName=[" Josh Hawley"," Michael Bloomberg"," Bernie Sanders"," Chase Oliver/Others"];
    HistEV=[381,146,11,0];
    HistPV=["72,652,766","61,320,177","18,007,951","3,260,060"];
    HistPVP=["46.8%","39.5%","11.6%","2.1%"];

function ensureStylesheet(url, id) {
	if (id && document.getElementById(id)) {
        if (id === 'unpkg-7css') {
            const link = document.getElementById(id);
if (link) link.remove();
            return; 
        }
        return;
    }
	if (document.querySelector('link[rel="stylesheet"][href="' + url + '"]')) return;
const link = document.createElement('link');
	link.rel = 'stylesheet';
	link.href = url;
	if (id) link.id = id;
	document.head.appendChild(link);
}



function ensureMetaViewport() {
    if (!document.querySelector('meta[name="viewport"]')) {
        const m = document.createElement('meta');
        m.name = 'viewport';
        m.content = 'width=device-width, initial-scale=1';
        document.head.appendChild(m);
    }
}

applyGlobalStyles.sheets = {};

function applyGlobalStyles(css, id = 'app-theme') {
    if ('adoptedStyleSheets' in document && 'replaceSync' in CSSStyleSheet.prototype) {
        if (!applyGlobalStyles.sheets[id]) {
            applyGlobalStyles.sheets[id] = new CSSStyleSheet();
            document.adoptedStyleSheets = [...document.adoptedStyleSheets, applyGlobalStyles.sheets[id]];
        }
        applyGlobalStyles.sheets[id].replaceSync(css);
        return;
    }

    let el = document.getElementById(id);
    if (!el) {
        el = document.createElement('style');
        el.id = id;
        document.head.appendChild(el);
    }
    el.textContent = css;
}

class Song {
  constructor(title, artist, coverLink, audioLink) {
    this.title = title;
    this.artist = artist;
    this.coverLink = coverLink;
    this.audioLink = audioLink;
  }
  getTitle() { return this.title; }
  getArtist() { return this.artist; }
  getCoverLink() { return this.coverLink; }
  getAudioLink() { return this.audioLink; }
}

class Playlist {
  constructor() {
    this.songs = [];
    this.currentSongIndex = 0;
  }
  addSong(song) { this.songs.push(song); }
  getCurrentSong() { return this.songs[this.currentSongIndex]; }
  playNext() { this.currentSongIndex = (this.currentSongIndex + 1) % this.songs.length; }
  playPrevious() { this.currentSongIndex = (this.currentSongIndex - 1 + this.songs.length) % this.songs.length; }
}

window.Playlist = Playlist;
window.Song = Song;

function changePlaylist(newPlaylist) {
  playlist = newPlaylist;
  playlist.currentSongIndex = 0;
  updateUI(playlist);
  const audio = document.getElementById("audio");
  audio.src = playlist.getCurrentSong().audioLink;
  audio.play();
}
window.changePlaylist = changePlaylist;

function updateUI(playlist) {
  const currentSong = playlist.getCurrentSong();
  const player = document.getElementById("player");
  if (!player) return;
  player.querySelector("#cover").src = currentSong.getCoverLink();
  player.querySelector("#title").textContent = currentSong.getTitle();
  player.querySelector("#artist").textContent = currentSong.getArtist();

  const listItems = player.querySelectorAll(".playlist-item");
  listItems.forEach((li, idx) => {
    li.classList.toggle("active", idx === playlist.currentSongIndex);
  });
}

function setupMusicPlayer() {
  playlist = new Playlist();

  const songs = [
    new Song("Leave Me Alone", "I Don't Know But They Found Me", "https://files.catbox.moe/1mj5q3.jpeg", "https://files.catbox.moe/9r06uj.mp3"),
    new Song("Compliance", "Muse", "https://files.catbox.moe/miqktn.jpg", "https://files.catbox.moe/heg2ht.mp3"),
    new Song("The Man Who Sold The World", "Midge Ure", "https://files.catbox.moe/z7llr3.jpeg", "https://files.catbox.moe/tsnmtm.mp3"),
    new Song("Buddha Was A Rich Boy", "That Handsome Devil", "https://files.catbox.moe/n9s2oo.jpeg", "https://files.catbox.moe/1ggkab.mp3"),
    new Song("Electioneering", "Radiohead", "https://files.catbox.moe/9vx49d.jpeg", "https://files.catbox.moe/dsp88c.mp3"),
    new Song("Capitalism", "Oingo Boingo", "https://files.catbox.moe/3abtdh.jpg", "https://files.catbox.moe/fyy0ul.mp3"),
    new Song("Biggering", "The 88", "https://files.catbox.moe/m21r99.jpg", "https://files.catbox.moe/5oyc04.mp3"),
    new Song("Kiss Me, Son Of God", "They Might Be Giants", "https://files.catbox.moe/dcewip.jpeg", "https://files.catbox.moe/eser1n.mp3"),
    new Song("Out Of Touch", "Daryl Hall & John Oates", "https://files.catbox.moe/rvg6kx.jpeg", "https://files.catbox.moe/t0x6cr.mp3"),
  ];
  songs.forEach(s => playlist.addSong(s));

  const existing = document.getElementById("player");
  if (existing) existing.remove();

  const playerContainer = document.createElement("div");
  playerContainer.id = "player";

  const leftCol = document.createElement("div");
  leftCol.id = "player-left";
  const cover = document.createElement("img");
  cover.id = "cover";
  cover.alt = "cover";
  leftCol.appendChild(cover);
  playerContainer.appendChild(leftCol);

  const centerCol = document.createElement("div");
  centerCol.id = "player-center";

  const titleEl = document.createElement("div");
  titleEl.id = "title";
  centerCol.appendChild(titleEl);

  const artistEl = document.createElement("div");
  artistEl.id = "artist";
  centerCol.appendChild(artistEl);

  const controlsRow = document.createElement("div");
  controlsRow.id = "controls-row";

  const prevBtn = document.createElement("button");
  prevBtn.id = "prevButton";
  prevBtn.className = "control-btn";
  prevBtn.textContent = "⏮"; 
  prevBtn.title = "Previous Song";
  controlsRow.appendChild(prevBtn);

  const playPauseBtn = document.createElement("button");
  playPauseBtn.id = "playPauseButton";
  playPauseBtn.className = "control-btn";
  playPauseBtn.textContent = "⏯"; 
  playPauseBtn.title = "Play / Pause";
  controlsRow.appendChild(playPauseBtn);

  const nextBtn = document.createElement("button");
  nextBtn.id = "nextButton";
  nextBtn.className = "control-btn";
  nextBtn.textContent = "⏭"; 
  nextBtn.title = "Next Song";
  controlsRow.appendChild(nextBtn);

  centerCol.appendChild(controlsRow);

  const progressRow = document.createElement("div");
  progressRow.id = "progress-row";
  const progressInput = document.createElement("input");
  progressInput.type = "range";
  progressInput.id = "progress-bar";
  progressInput.min = 0;
  progressInput.max = 100;
  progressInput.value = 0;
  progressRow.appendChild(progressInput);
  centerCol.appendChild(progressRow);

  const volRow = document.createElement("div");
  volRow.id = "volume-row";
  const volSlider = document.createElement("input");
  volSlider.type = "range";
  volSlider.id = "volumeSlider";
  volSlider.min = 0;
  volSlider.max = 9;
  volSlider.step = 1;
  volSlider.value = 1;
  volRow.appendChild(volSlider);
  centerCol.appendChild(volRow);

  playerContainer.appendChild(centerCol);

  const rightCol = document.createElement("div");
  rightCol.id = "player-right";
  const playlistList = document.createElement("div");
  playlistList.id = "playlist-list";
  playlist.songs.forEach((song, i) => {
    const item = document.createElement("div");
    item.className = "playlist-item";
    item.textContent = `${song.getTitle()} — ${song.getArtist()}`;
    item.addEventListener("click", () => {
      playlist.currentSongIndex = i;
      audio.src = playlist.getCurrentSong().audioLink;
      audio.play();
      updateUI(playlist);
    });
    playlistList.appendChild(item);
  });
  rightCol.appendChild(playlistList);
  playerContainer.appendChild(rightCol);

  const gameWindow_player = document.getElementById("game_window");
  if (gameWindow_player) gameWindow_player.insertAdjacentElement("afterend", playerContainer);
  else document.body.appendChild(playerContainer);

  const audio = document.createElement("audio");
  audio.id = "audio";
  audio.src = playlist.getCurrentSong().audioLink;
  audio.volume = 1 / 9;
  document.body.appendChild(audio);

  playPauseBtn.addEventListener("click", function () {
    if (audio.paused) audio.play();
    else audio.pause();
  });

  nextBtn.addEventListener("click", function () {
    playlist.playNext();
    audio.src = playlist.getCurrentSong().audioLink;
    audio.play();
    updateUI(playlist);
  });

  prevBtn.addEventListener("click", function () {
    playlist.playPrevious();
    audio.src = playlist.getCurrentSong().audioLink;
    audio.play();
    updateUI(playlist);
  });

  const progressEl = document.getElementById("progress-bar");

function smoothProgressUpdate() {
  if (audio.duration) {
    const value = (audio.currentTime / audio.duration) * 100;
    progressEl.value = value;
    const fill = `linear-gradient(to right, #fff 0%, #fff ${value}%, rgba(255,255,255,0.2) ${value}%, rgba(255,255,255,0.2) 100%)`;
    progressEl.style.background = fill;
  }
  requestAnimationFrame(smoothProgressUpdate);
}
requestAnimationFrame(smoothProgressUpdate);



  progressEl.addEventListener("input", () => {
    if (audio.duration) audio.currentTime = (progressEl.value / 100) * audio.duration;
  });

  const volumeSlider = document.getElementById("volumeSlider");
  volumeSlider.addEventListener("input", function () {
    audio.volume = parseInt(volumeSlider.value, 10) / 9;
  });

  audio.addEventListener("ended", function () {
    playlist.playNext();
    audio.src = playlist.getCurrentSong().audioLink;
    audio.play();
    updateUI(playlist);
  });

  updateUI(playlist);
}

const style = document.createElement("style");
style.textContent = `
#player {
  display: grid;
  grid-template-columns: 240px 1fr 380px;
  gap: 24px;
  background: linear-gradient(180deg, #a1b2fa, #8ca0fa);
  color: #fff;
  padding: 20px 28px;
  border-radius: 12px;
  box-shadow: 0 5px 20px rgba(0,0,0,0.5);
  font-family: 'Helvetica Neue', sans-serif;
  max-width: 1200px;
  margin: 30px auto;
}
#player #player-left img {
  width: 220px;
  height: 220px;
  border-radius: 14px;
  object-fit: cover;
}
#player #player-center {
  display: flex;
  flex-direction: column;
  justify-content: center;
  gap: 12px;
}
#player #title {
  font-size: 26px;
  font-weight: 700;
}
#player #artist {
  font-size: 14px;
  color: #fff;
}
#player #controls-row {
  display: flex;
  gap: 10px;
  align-items: center;
}
#player .control-btn {
  width: 60px;
  height: 60px;
  border-radius: 50%;
  background: rgba(255,255,255,0.08);
  border: none;
  cursor: pointer;
  font-size: 26px;
  color: #fff;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: transform 0.1s ease, background 0.2s ease;
}
#player .control-btn:hover {
  background: rgba(255,255,255,0.15);
  transform: scale(1.05);
}
#player #progress-bar {
  width: 100%;
  height: 5px;
  cursor: pointer;
  border-radius: 2px;
  outline: none;
  background: rgba(255,255,255,0.2);
  -webkit-appearance: none;
  appearance: none;
}
#player #progress-bar::-webkit-slider-thumb {
  -webkit-appearance: none;
  width: 10px;
  height: 10px;
  border-radius: 50%;
  background: #fff;
  cursor: pointer;
  position: relative;
  border: 2px solid #000
  margin-top: -2px;
}
#player #progress-bar::-moz-range-thumb {
  width: 10px;
  height: 10px;
  border-radius: 50%;
  background: #fff;
  cursor: pointer;
}

#player #progress-bar::-webkit-slider-thumb:hover,
#player #progress-bar::-moz-range-thumb:hover {
  background: #ddd;
  transform: scale(1.1);
}
#player #volumeSlider {
  width: 100px;
  height: 5px;
  accent-color: #fff;
  cursor: pointer;
}
#player #playlist-list {
  display: flex;
  flex-direction: column;
  gap: 10px;
}
#player .playlist-item {
  cursor: pointer;
  font-size: 14px;
  color: #fff;
  padding: 6px 8px;
  border-radius: 6px;
  transition: background 0.15s ease;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
#player .playlist-item:hover {
  background: rgba(255,255,255,0.05);
}
#player .playlist-item.active {
  background: rgba(255,255,255,0.1);
  color: #fff;
}
`;
document.head.appendChild(style);

setupMusicPlayer();

//#endcode
